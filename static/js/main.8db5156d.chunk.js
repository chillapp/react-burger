(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{104:function(e,t,n){},197:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=(n(104),n(41)),s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,207)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},o=n(88),i=n.n(o),l=n(2),u=n.n(l),d=n(5),j=n(54),m=n.n(j),b=n(11),x=n(0),f=function(e){var t=e.icon,n=e.navLink,c=e.click,a=e.children,r=function(){switch(t){case"burger":return Object(x.jsx)("span",{className:"mr-2",children:Object(x.jsx)(d.BurgerIcon,{type:"primary"})});case"list":return Object(x.jsx)("span",{className:"mr-2",children:Object(x.jsx)(d.ListIcon,{type:"primary"})});case"profile":return Object(x.jsx)("span",{className:"mr-2",children:Object(x.jsx)(d.ProfileIcon,{type:"primary"})});case"delete":return Object(x.jsx)("span",{className:"mr-2",children:Object(x.jsx)(d.DeleteIcon,{type:"primary"})});default:return""}};return n?Object(x.jsxs)(b.c,{exact:"/"===n,activeClassName:m.a.active,to:n,className:"".concat(m.a.iconButton," text_color_inactive"),children:[r(),Object(x.jsx)("span",{className:"text text_type_main-default",children:a})]}):Object(x.jsxs)("button",{className:"".concat(m.a.iconButton," text_color_inactive"),onClick:c,children:[r(),Object(x.jsx)("span",{className:"text text_type_main-default",children:a})]})};function O(){return Object(x.jsxs)("header",{className:"p-4 ".concat(u.a.panelColor," ").concat(u.a.flexRow," ").concat(u.a.flexJCAround),children:[Object(x.jsx)("div",{className:i.a.logoCentering,children:Object(x.jsx)(d.Logo,{})}),Object(x.jsxs)("section",{className:u.a.flexRow,children:[Object(x.jsx)(f,{navLink:"/",icon:"burger",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"}),Object(x.jsx)(f,{navLink:"/feed",icon:"list",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(x.jsx)(f,{navLink:"/profile",icon:"profile",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})}var p=n(89),_=n.n(p),h=n(3),C=n(6),v=n(42),g=n.n(v),R=n(204),S=n(12),N=function(e){var t=e.data,n=e.selected,a=Object(R.a)({type:"ingredient",item:Object(h.a)({},t),collect:function(e){return{opacity:e.isDragging()?.5:1}}}),r=Object(C.a)(a,2),s=r[0].opacity,o=r[1],i=Object(S.g)(),l=Object(S.h)(),j=Object(c.useCallback)((function(){i.replace({pathname:"ingredients/".concat(t._id),state:{background:l}})}),[t._id,i,l]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{draggable:!0,ref:o,style:{opacity:s},className:g.a.item,onClick:j,children:[n>0?Object(x.jsx)(d.Counter,{count:n}):null,Object(x.jsx)("div",{className:g.a.image,children:Object(x.jsx)("img",{src:t.image,alt:""})}),Object(x.jsxs)("div",{className:g.a.price,children:[Object(x.jsx)("span",{className:"pr-3 text text_type_digits-default",children:t.price}),Object(x.jsx)(d.CurrencyIcon,{type:"primary"})]}),Object(x.jsx)("div",{className:"".concat(u.a.flexRow," ").concat(u.a.flexAICenter),children:Object(x.jsx)("span",{className:"".concat(g.a.name," pt-1"),children:t.name})})]})})},y=r.c,E=function(){return Object(r.b)()},T=n(72),I=n(91),w=n(92),U=["success"];function F(e){return A.apply(this,arguments)}function A(){return(A=Object(w.a)(Object(T.a)().mark((function e(t){var n;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.json();case 4:if(!(n=e.sent).message){e.next=7;break}return e.abrupt("return",Promise.reject(n.message));case 7:return e.abrupt("return",Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t.status)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){var t=e.success,n=Object(I.a)(e,U);return t?Promise.resolve(n):Promise.reject(n.message)}var D=function(e){return"https://norma.nomoreparties.space/api/".concat(e)},P=function(e){return"wss://norma.nomoreparties.space/".concat(e)},L=function(){var e=E(),t=y((function(e){return e.ingredients})),n=t.rows,c=t.ingredientsTab,r=y((function(e){return e.burgerConstructor})).cart,s=function(t,n){e(function(e){return{type:"INGREDIENTS_SET_TAB",tab:e}}(t)),n.current&&n.current.scrollIntoView({behavior:"smooth"})},o=a.a.useRef(null),i=a.a.useMemo((function(){var e=n.filter((function(e){return"bun"===e.type}));return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{ref:o,className:"text text_type_main-medium pt-10 mb-6",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(x.jsx)("div",{className:"".concat(u.a.flexRow," ").concat(u.a.flexWrap," ").concat(u.a.flexJCCenter),children:e.map((function(e){return Object(x.jsx)(N,{data:e,selected:r.filter((function(t){return t._id===e._id})).length},e._id)}))})]})}),[r,n]),l=a.a.useRef(null),j=a.a.useMemo((function(){var e=n.filter((function(e){return"sauce"===e.type}));return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{ref:l,className:"text text_type_main-medium pt-10 mb-6",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(x.jsx)("div",{className:"".concat(u.a.flexRow," ").concat(u.a.flexWrap," ").concat(u.a.flexJCCenter),children:e.map((function(e){return Object(x.jsx)(N,{data:e,selected:r.filter((function(t){return t._id===e._id})).length},e._id)}))})]})}),[r,n]),m=a.a.useRef(null),b=a.a.useMemo((function(){var e=n.filter((function(e){return"main"===e.type}));return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{ref:m,className:"text text_type_main-medium pt-10 mb-6",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(x.jsx)("div",{className:"".concat(u.a.flexRow," ").concat(u.a.flexWrap," ").concat(u.a.flexJCCenter),children:e.map((function(e){return Object(x.jsx)(N,{data:e,selected:r.filter((function(t){return t._id===e._id})).length},e._id)}))})]})}),[r,n]),f=null,O=function(e){var t=e.target.getBoundingClientRect(),n=[];if(o.current){var c=o.current.getBoundingClientRect(),a=Math.abs(c.y-t.y);if(n.push(a),l.current){var r=l.current.getBoundingClientRect(),s=Math.abs(r.y-t.y);if(n.push(s),m.current){var i=m.current.getBoundingClientRect(),u=Math.abs(i.y-t.y);n.push(u);var d=Math.min.apply(Math,n);n.indexOf(d)}}}};return Object(x.jsxs)("section",{className:"pt-10 ".concat(_.a.content," ").concat(u.a.flexColumn," ").concat(u.a.flexFill),children:[Object(x.jsx)("span",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(x.jsxs)("div",{className:"pt-5 ".concat(u.a.flexRow," ").concat(u.a.flexFill),children:[Object(x.jsx)(d.Tab,{value:"bun",active:"bun"===c,onClick:function(e){return s(e,o)},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(x.jsx)(d.Tab,{value:"sauce",active:"sauce"===c,onClick:function(e){return s(e,l)},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(x.jsx)(d.Tab,{value:"main",active:"main"===c,onClick:function(e){return s(e,m)},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(x.jsxs)("section",{className:"scrollerY",onScroll:function(e){f&&clearTimeout(f),f=setTimeout((function(){return O(e)}),20)},children:[i,j,b]})]})},J=n(31),q=n.n(J),M=n(205),G=function(e){var t=e.ingredient,n=E(),c=y((function(e){return e.burgerConstructor})).cart,a=Object(R.a)({type:"ingredient_move",item:Object(h.a)({},t),collect:function(e){return{opacity:e.isDragging()?.5:1}}}),r=Object(C.a)(a,2),s=r[0].opacity,o=r[1],i=Object(M.a)({accept:"ingredient_move",drop:function(e){n(function(e){return{type:"CONSTRUCTOR_REPLACE",data:e}}({dragIngredient:e,dropIngredient:t}))},collect:function(e){return{isHover:e.isOver(),dropItem:e.getItem()}}}),l=Object(C.a)(i,2),j=l[0],m=j.isHover,b=j.dropItem,O=l[1],p="none",_="none";m&&b.uuid!==t.uuid&&(c.findIndex((function(e){return e.uuid===b.uuid}))>=c.findIndex((function(e){return e.uuid===t.uuid}))?p="block":_="block");return Object(x.jsxs)("li",{ref:O,children:[Object(x.jsx)("div",{className:q.a.canDragUp,style:{display:p}}),Object(x.jsxs)("div",{style:{opacity:s},className:"".concat(u.a.flexRow," ").concat(u.a.flexFill," ").concat(u.a.flexAICenter," mt-4"),children:[Object(x.jsx)("div",{draggable:!0,ref:o,className:q.a.dragPointer,children:Object(x.jsx)(d.DragIcon,{type:"primary"})}),Object(x.jsxs)("div",{className:"pt-4 pb-4 pr-8 pl-6 mr-2 ml-2 ".concat(q.a.item," ").concat(u.a.flexFill),children:[Object(x.jsx)("img",{alt:"",className:q.a.smallImage,src:t.image}),Object(x.jsx)("span",{className:"text text_type_main-default ml-5 ".concat(u.a.flexFill),children:t.name}),Object(x.jsx)("span",{className:"ml-5 mr-1 text text_type_digits-default",children:t.price}),Object(x.jsx)(d.CurrencyIcon,{type:"primary"}),Object(x.jsx)("div",{className:"pl-5",children:Object(x.jsx)(f,{icon:"delete",click:function(){return n(function(e){return{type:"CONSTRUCTOR_DEL",ingredient:e}}(t))}})})]})]}),Object(x.jsx)("div",{className:q.a.canDragDown,style:{display:_}})]})},B=n(55),W=n.n(B),Q=function(e){var t=e.role,n=e.bun;return Object(x.jsx)("div",{className:"".concat(u.a.flexRow," ").concat(u.a.flexAICenter," pl-8"),children:Object(x.jsxs)("div",{className:"pt-4 pb-4 pr-8 pl-6 mr-4\n                    ".concat(u.a.panelColor,"\n                    ").concat(u.a.flexRow,"\n                    ").concat(u.a.flexAICenter,"\n                    ").concat(u.a.flexFill,"\n                    ").concat("top"===t?W.a.itemTop:W.a.itemBottom),children:[Object(x.jsx)("img",{style:{display:n?"unset":"none"},alt:"",className:W.a.smallImage,src:n&&n.image}),Object(x.jsxs)("span",{className:"text text_type_main-default ml-5 ".concat(u.a.flexFill),children:[n?n.name:"\u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443","top"===t?" (\u0432\u0435\u0440\u0445)":" (\u043d\u0438\u0437)"]}),Object(x.jsx)("span",{className:"ml-5 mr-1 text text_type_digits-default",children:n?n.price/2:0}),Object(x.jsx)(d.CurrencyIcon,{type:"primary"}),Object(x.jsx)("div",{className:"pl-5",children:Object(x.jsx)(d.LockIcon,{type:"secondary"})})]})})},H=n(66),Y=n.n(H),K=n(30),z=n.n(K),X=n(93),Z=n.n(X),V=n(94),$=n.n(V),ee=function(e){var t=e.onClick;return Object(x.jsx)("div",{onClick:t,className:"".concat($.a.modalOverlay)})},te=document.getElementById("react-modals"),ne=function(e){var t=e.header,n=e.children,c=e.onClose;if(null===te)throw"modal root is not implemented";return a.a.useEffect((function(){var e=function(e){"Escape"===e.key&&c()};return document.addEventListener("keyup",e),function(){return document.removeEventListener("keyup",e)}}),[c]),z.a.createPortal(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"".concat(Z.a.modal),children:[Object(x.jsxs)("div",{className:"pt-10 pr-10 pl-10 ".concat(u.a.flexRow," ").concat(u.a.flexJCBetween),children:[Object(x.jsx)("span",{className:"text text_type_main-medium",children:t}),Object(x.jsx)("button",{onClick:c,className:"".concat(u.a.button),children:Object(x.jsx)(d.CloseIcon,{type:"primary"})})]}),Object(x.jsx)("div",{className:"p-10",children:n})]}),Object(x.jsx)(ee,{onClick:c})]}),te)},ce=n(67),ae=n.n(ce),re=function(e){var t=e.extraClass,n=e.centered;return Object(x.jsx)("div",{className:"".concat(ae.a.spinner," ").concat(t," ").concat(n?ae.a.centered:null)})};function se(e,t,n){(n=n||{}).path||(n.path="/");var c=n.expires;if("number"==typeof c&&c){var a=new Date;a.setTime(a.getTime()+1e3*c),c=n.expires=a}c&&c.toUTCString&&(n.expires=c.toUTCString());var r=e+"="+(t=encodeURIComponent(t||""));for(var s in n){r+="; "+s;var o=n[s];!0!==o&&(r+="="+o)}document.cookie=r}function oe(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):""}var ie=function(){return function(e){e({type:"AUTH_USER_REQUEST"}),fetch(D("auth/user"),{method:"GET",headers:{Authorization:oe("accessToken")}}).then(F).then(k).then((function(t){return e({type:"AUTH_USER_SUCCESS",user:t.user})})).catch((function(t){e({type:"AUTH_USER_FAILURE"})}))}},le=function(){var e=E(),t=Object(S.h)(),n=y((function(e){return e.user})),c=n.user,r=n.order,s=n.userCreateOrderRequest,o=n.userCreateOrderFailure,i=y((function(e){return e.burgerConstructor})).cart;if(a.a.useEffect((function(){r&&e({type:"CONSTRUCTOR_RESET"})}),[e,r]),a.a.useEffect((function(){if(c){var t=i.map((function(e){return e._id}));e(function(e){return function(t){t({type:"USER_CREATE_ORDER_REQUEST"}),fetch(D("orders"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredients:e})}).then(F).then(k).then((function(e){return t({type:"USER_CREATE_ORDER_SUCCESS",order:{name:e.name,number:e.order.number}})})).catch((function(){return t({type:"USER_CREATE_ORDER_FAILURE"})}))}}(t))}}),[c,e]),!c)return Object(x.jsx)(S.a,{to:{pathname:"/login",state:{from:t.pathname}}});var l=Object(x.jsxs)("div",{className:"".concat(u.a.flexColumn),children:[Object(x.jsx)("span",{className:"text text_type_digits-large ".concat(u.a.textCenter),children:r&&r.number}),Object(x.jsx)("span",{className:"text text_type_main-default ".concat(u.a.textCenter),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(x.jsx)("div",{className:"pt-15 pb-15 ".concat(u.a.textCenter),children:Object(x.jsx)(d.CheckMarkIcon,{type:"primary"})}),Object(x.jsx)("span",{className:"text text_type_main-small ".concat(u.a.textCenter),children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(x.jsx)("span",{className:"mt-2 text text_color_inactive text_type_main-small ".concat(u.a.textCenter),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]});return s?Object(x.jsx)("div",{className:"".concat(u.a.flexColumn," ").concat(u.a.flexAICenter),children:Object(x.jsx)(re,{})}):o?Object(x.jsx)("span",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430"}):l},ue=function(){var e=E(),t=Object(M.a)({accept:"ingredient",drop:function(t){e(function(e){return{type:"CONSTRUCTOR_ADD",ingredient:e}}(t))}}),n=Object(C.a)(t,2)[1],c=a.a.useState(!1),r=Object(C.a)(c,2),s=r[0],o=r[1],i=y((function(e){return e.burgerConstructor})),l=i.cart,j=i.totalPrice,m=a.a.useMemo((function(){return l.filter((function(e){return"bun"===e.type}))}),[l]),b=a.a.useMemo((function(){return l.filter((function(e){return"bun"!==e.type})).map((function(e){return Object(x.jsx)(G,{ingredient:e},e.uuid)}))}),[l]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("section",{ref:n,className:"pt-25 ml-10 ".concat(u.a.flexColumn," ").concat(Y.a.content),children:[Object(x.jsx)(Q,{role:"top",bun:m&&m[0]}),Object(x.jsx)("ul",{className:"scrollerY ".concat(u.a.flexColumn," ").concat(Y.a.list),children:b}),Object(x.jsx)(Q,{role:"bottom",bun:m&&m[0]}),Object(x.jsxs)("div",{style:{visibility:j>0?"visible":"hidden"},className:"pt-10 ".concat(u.a.flexRow," ").concat(u.a.flexAICenter," ").concat(u.a.flexJCRight),children:[Object(x.jsx)("span",{className:"text text_type_digits-medium",children:j}),Object(x.jsx)(d.CurrencyIcon,{type:"primary"}),Object(x.jsx)("div",{className:"ml-10",children:Object(x.jsx)(d.Button,{onClick:function(){return o(!0)},htmlType:"button",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]})]}),s&&Object(x.jsx)(ne,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430",onClose:function(){return o(!1)},children:Object(x.jsx)(le,{})})]})},de=n(203),je=n(101),me=function(){var e=y((function(e){return e.ingredients})),t=e.ingredientsRequest,n=e.ingredientsFailure;return Object(x.jsx)("section",{className:"".concat(u.a.flexRow," ").concat(u.a.flexJCCenter," ").concat(u.a.page," pb-4"),children:t?Object(x.jsx)(re,{extraClass:"".concat(u.a.flexItemASCenter)}):n?Object(x.jsx)("span",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u043f\u0438\u0441\u043a\u0430 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u043e\u0432 :("}):Object(x.jsxs)(de.a,{backend:je.a,children:[Object(x.jsx)(L,{}),Object(x.jsx)(ue,{})]})})},be=function(){var e=E(),t=Object(c.useState)(""),n=Object(C.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),o=Object(C.a)(s,2),i=o[0],l=o[1],j=Object(c.useState)("password"),m=Object(C.a)(j,2),f=m[0],O=m[1];Object(c.useEffect)((function(){e(ie())}),[e]);var p,_=Object(c.useCallback)((function(t){var n;t.preventDefault(),t.stopPropagation(),e((n={email:a,password:i},function(e){e({type:"LOGIN_USER_REQUEST"}),fetch(D("auth/login"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json;charset=utf-8"}}).then(F).then(k).then((function(t){localStorage.setItem("refreshToken",t.refreshToken||""),se("accessToken",t.accessToken||""),e({type:"LOGIN_USER_SUCCESS",user:t.user})})).catch((function(){return e({type:"LOGIN_USER_FAILURE"})}))}))}),[e,a,i]),h=y((function(e){return e.user})),v=h.user,g=h.userAuthRequest,R=h.userLoginRequest,N=h.userLoginFailure,T=Object(S.h)();return v?Object(x.jsx)(S.a,{to:(null===(p=T.state)||void 0===p?void 0:p.from)||"/"}):Object(x.jsx)("section",{className:"\n                ".concat(u.a.flexColumn," \n                ").concat(u.a.flexAICenter," \n                ").concat(u.a.flexJCCenter," \n                ").concat(u.a.flexFill,"\n            "),children:R||g?Object(x.jsx)(re,{extraClass:"".concat(u.a.flexItemASCenter)}):Object(x.jsxs)("form",{onSubmit:_,children:[Object(x.jsx)("span",{className:"text_type_main-default text_color_primary",children:"\u0412\u0445\u043e\u0434"}),Object(x.jsx)("div",{className:"mt-6",children:Object(x.jsx)(d.Input,{name:"email",disabled:R,value:a,type:"email",placeholder:"E-mail",onChange:function(e){return r(e.target.value)}})}),Object(x.jsx)("div",{className:"mt-6",children:Object(x.jsx)(d.Input,{name:"password",disabled:R,value:i,type:f,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"ShowIcon",onIconClick:function(){O("password"===f?"text":"password")},onChange:function(e){return l(e.target.value)}})}),N&&Object(x.jsx)("span",{className:"text_type_main-small text_color_error mt-6",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"}),Object(x.jsx)("div",{className:"mt-6",children:Object(x.jsx)(d.Button,{htmlType:"submit",disabled:R,children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(x.jsxs)("div",{className:"mt-20",children:[Object(x.jsx)("span",{className:"text_type_main-default text_color_inactive",children:"\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? "}),Object(x.jsx)(b.b,{to:"/register",className:"text_type_main-default text_color_accent ".concat(u.a.textDecorationNone),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(x.jsxs)("div",{className:"mt-4",children:[Object(x.jsx)("span",{className:"text_type_main-default text_color_inactive",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? "}),Object(x.jsx)(b.b,{to:"/forgot-password",className:"text_type_main-default text_color_accent ".concat(u.a.textDecorationNone),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})},xe=function(){var e=E(),t=Object(c.useState)(""),n=Object(C.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),o=Object(C.a)(s,2),i=o[0],l=o[1],j=Object(c.useState)(""),m=Object(C.a)(j,2),f=m[0],O=m[1],p=Object(c.useState)("password"),_=Object(C.a)(p,2),h=_[0],v=_[1];Object(c.useEffect)((function(){e(ie())}),[e]);var g=Object(c.useCallback)((function(t){t.preventDefault(),t.stopPropagation(),e(function(e){return function(t){t({type:"REGISTER_USER_REQUEST"}),fetch(D("auth/register"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json;charset=utf-8"}}).then(F).then(k).then((function(e){localStorage.setItem("refreshToken",e.refreshToken||""),se("accessToken",e.accessToken||""),t(function(e){return{type:"REGISTER_USER_SUCCESS",user:e}}(e.user))})).catch((function(){return t({type:"REGISTER_USER_FAILURE"})}))}}({email:i,password:f,name:a}))}),[i,f,a,e]),R=y((function(e){return e.user})),N=R.user,T=R.userRegisterRequest,I=R.userRegisterFailure;return N?Object(x.jsx)(S.a,{to:"/"}):Object(x.jsxs)("form",{className:"\n            ".concat(u.a.flexColumn," \n            ").concat(u.a.flexAICenter," \n            ").concat(u.a.flexJCCenter," \n            ").concat(u.a.flexFill,"\n        "),onSubmit:g,children:[Object(x.jsx)("span",{className:"text_type_main-default text_color_primary",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(x.jsx)("div",{className:"mt-6",children:Object(x.jsx)(d.Input,{disabled:T,value:a,type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return r(e.target.value)}})}),Object(x.jsx)("div",{className:"mt-6",children:Object(x.jsx)(d.Input,{disabled:T,value:i,type:"email",placeholder:"E-mail",onChange:function(e){return l(e.target.value)}})}),Object(x.jsx)("div",{className:"mt-6",children:Object(x.jsx)(d.Input,{disabled:T,value:f,type:h,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"ShowIcon",onIconClick:function(){v("password"===h?"text":"password")},onChange:function(e){return O(e.target.value)}})}),I&&Object(x.jsx)("span",{className:"text_type_main-small text_color_error mt-6",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),Object(x.jsx)("div",{className:"mt-6",children:Object(x.jsx)(d.Button,{htmlType:"submit",disabled:T,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(x.jsxs)("div",{className:"mt-20",children:[Object(x.jsx)("span",{className:"text_type_main-default text_color_inactive",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(x.jsx)(b.b,{to:"/login",className:"text_type_main-default text_color_accent ".concat(u.a.textDecorationNone),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},fe=function(){var e=Object(c.useState)(""),t=Object(C.a)(e,2),n=t[0],a=t[1],r=E(),s=y((function(e){return e.user})),o=s.user,i=s.userForgotPasswordRequest,l=s.userForgotPasswordSuccess;Object(c.useEffect)((function(){}),[]);var j=Object(c.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),r(function(e){return function(t){t({type:"FORGOT_PASSWORD_REQUEST"}),fetch(D("password-reset"),{method:"POST",body:JSON.stringify({email:e}),headers:{"Content-Type":"application/json;charset=utf-8"}}).then(F).then(k).then((function(){return t({type:"FORGOT_PASSWORD_SUCCESS"})})).catch((function(){return t({type:"FORGOT_PASSWORD_FAILURE"})}))}}(n))}),[r,n]);return o?Object(x.jsx)(S.a,{to:"/"}):l?Object(x.jsx)(S.a,{push:!0,to:"/reset-password"}):Object(x.jsxs)("form",{className:"\n            ".concat(u.a.flexColumn," \n            ").concat(u.a.flexAICenter," \n            ").concat(u.a.flexJCCenter," \n            ").concat(u.a.flexFill,"\n        "),onSubmit:j,children:[Object(x.jsx)("span",{className:"text_type_main-default text_color_primary",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(x.jsx)("div",{className:"mt-6",children:Object(x.jsx)(d.Input,{disabled:i,value:n,type:"email",placeholder:"E-mail",onChange:function(e){return a(e.target.value)}})}),Object(x.jsx)("div",{className:"mt-6",children:Object(x.jsx)(d.Button,{htmlType:"submit",disabled:i,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(x.jsxs)("div",{className:"mt-20",children:[Object(x.jsx)("span",{className:"text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(x.jsx)(b.b,{to:"/login",className:"text_type_main-default text_color_accent ".concat(u.a.textDecorationNone),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Oe=function(){var e=E(),t=Object(c.useState)(""),n=Object(C.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),o=Object(C.a)(s,2),i=o[0],l=o[1],j=Object(c.useState)("password"),m=Object(C.a)(j,2),f=m[0],O=m[1];Object(c.useEffect)((function(){e(ie())}),[e]);var p=y((function(e){return e.user})),_=p.user,h=p.userResetPasswordRequest,v=p.userResetPasswordFailure,g=p.userResetPasswordSuccess,R=Object(c.useCallback)((function(t){var n;t.preventDefault(),t.stopPropagation(),e((n={password:a,token:i},function(e){e({type:"RESET_PASSWORD_REQUEST"}),fetch(D("password-reset/reset"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json;charset=utf-8"}}).then(F).then(k).then((function(){return e({type:"RESET_PASSWORD_SUCCESS"})})).catch((function(){return e({type:"RESET_PASSWORD_FAILURE"})}))}))}),[e,i,a]);return _?Object(x.jsx)(S.a,{to:"/"}):g?Object(x.jsx)(S.a,{to:"/login"}):Object(x.jsxs)("form",{className:"\n            ".concat(u.a.flexColumn," \n            ").concat(u.a.flexAICenter," \n            ").concat(u.a.flexJCCenter," \n            ").concat(u.a.flexFill,"\n        "),onSubmit:R,children:[Object(x.jsx)("span",{className:"text_type_main-default text_color_primary",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(x.jsx)("div",{className:"mt-6",children:Object(x.jsx)(d.Input,{disabled:h,value:a,type:f,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return r(e.target.value)},icon:"ShowIcon",onIconClick:function(){O("password"===f?"text":"password")}})}),Object(x.jsx)("div",{className:"mt-6",children:Object(x.jsx)(d.Input,{disabled:h,value:i,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:function(e){return l(e.target.value)}})}),v&&Object(x.jsx)("span",{className:"text_type_main-small text_color_error mt-6",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043c\u0435\u043d\u044b \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(x.jsx)("div",{className:"mt-6",children:Object(x.jsx)(d.Button,{htmlType:"submit",disabled:h,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(x.jsxs)("div",{className:"mt-20",children:[Object(x.jsx)("span",{className:"text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? "}),Object(x.jsx)(b.b,{to:"/login",className:"text_type_main-default text_color_accent ".concat(u.a.textDecorationNone),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},pe=n(95),_e=function(e){var t=Object.assign({},(Object(pe.a)(e),e)),n=Object(S.h)();return y((function(e){return e.user})).user?Object(x.jsx)(S.b,Object(h.a)({},t)):Object(x.jsx)(S.a,{to:{pathname:"/login",state:{from:n.pathname}}})},he=n(32),Ce=n.n(he),ve=void 0,ge=function(){var e=E(),t=y((function(e){return e.user})).user,n={name:(null===t||void 0===t?void 0:t.name)||"",email:(null===t||void 0===t?void 0:t.email)||"",pwd:""},a=Object(c.useRef)(null),r=Object(c.useState)((null===t||void 0===t?void 0:t.name)||""),s=Object(C.a)(r,2),o=s[0],i=s[1],l=Object(c.useState)(!1),u=Object(C.a)(l,2),j=u[0],m=u[1],b=Object(c.useRef)(null),f=Object(c.useState)((null===t||void 0===t?void 0:t.email)||""),O=Object(C.a)(f,2),p=O[0],_=O[1],h=Object(c.useState)(!1),v=Object(C.a)(h,2),g=v[0],R=v[1],S=Object(c.useRef)(null),N=Object(c.useState)(""),T=Object(C.a)(N,2),I=T[0],w=T[1],U=Object(c.useState)(!1),A=Object(C.a)(U,2),P=A[0],L=A[1],J=Object(c.useState)(!1),q=Object(C.a)(J,2),M=q[0],G=q[1];Object(c.useEffect)((function(){G(o!==n.name||p!==n.email||I!==n.pwd)}),[o,p,I,n.name,n.email,n.pwd]);var B=function(e,t,n,c){c(!n),n?e!==t.current.value&&G(!0):setTimeout((function(){return t.current.focus()}))},W=Object(c.useCallback)((function(n){n.preventDefault(),n.stopPropagation();var c,a={};I&&(a.password=I),o!==(null===t||void 0===t?void 0:t.name)&&(a.name=o),p!==(null===t||void 0===t?void 0:t.email)&&(a.email=p),e((c=a,function(e){e({type:"UPDATE_USER_REQUEST"}),fetch(D("auth/user"),{method:"PATCH",headers:{Authorization:oe("accessToken"),"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(c)}).then(F).then(k).then((function(t){return e({type:"UPDATE_USER_SUCCESS",user:t.user})})).catch((function(){return e({type:"UPDATE_USER_FAILURE"})}))})),G(!1),m(!1),R(!1),L(!1)}),[I,o,null===t||void 0===t?void 0:t.name,null===t||void 0===t?void 0:t.email,p,e]),Q=Object(c.useCallback)((function(){i((null===t||void 0===t?void 0:t.name)||""),m(!1),_((null===t||void 0===t?void 0:t.email)||""),R(!1),w(""),L(!1),G(!1)}),[null===t||void 0===t?void 0:t.email,null===t||void 0===t?void 0:t.name]);return Object(x.jsxs)("form",{onSubmit:W,children:[Object(x.jsx)("div",{children:Object(x.jsx)(d.Input,{name:"name",value:o,placeholder:"\u0418\u043c\u044f",ref:a,disabled:!j,onChange:function(e){return i(e.target.value)},icon:j?"CheckMarkIcon":"EditIcon",onIconClick:B.bind(ve,n.name,a,j,m)})}),Object(x.jsx)("div",{className:"pt-6",children:Object(x.jsx)(d.Input,{name:"email",value:p,placeholder:"\u041b\u043e\u0433\u0438\u043d",ref:b,disabled:!g,onChange:function(e){return _(e.target.value)},icon:g?"CheckMarkIcon":"EditIcon",onIconClick:B.bind(ve,n.email,b,g,R)})}),Object(x.jsx)("div",{className:"pt-6",children:Object(x.jsx)(d.Input,{name:"password",type:"password",value:I,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",ref:S,disabled:!P,onChange:function(e){return w(e.target.value)},icon:P?"CheckMarkIcon":"EditIcon",onIconClick:B.bind(ve,n.pwd,S,P,L)})}),Object(x.jsxs)("div",{className:"pt-6",children:[Object(x.jsx)(d.Button,{htmlType:"button",type:"secondary",disabled:!M,onClick:Q,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(x.jsx)(d.Button,{htmlType:"submit",disabled:!M,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},Re=n(69),Se=n.n(Re),Ne=n(96),ye=n.n(Ne),Ee=(n(196),function(e){var t=e.feedOrder,n=y((function(e){return e.ingredients})).rows.filter((function(e){return t.ingredients.indexOf(e._id)>=0})),r=a.a.useMemo((function(){return n.reduce((function(e,t){return e+t.price}),0)}),[n]),s=a.a.useMemo((function(){return n.map((function(e){return Object(x.jsx)("img",{className:"".concat(Se.a.ingredientLogo),src:e.image_mobile,alt:""},e._id)}))}),[n]),o=Object(S.g)(),i=Object(S.h)(),l=Object(c.useCallback)((function(){o.replace({pathname:"".concat(i.pathname,"/").concat(t.number),state:{background:i}})}),[t.number,o,i]);return Object(x.jsxs)("div",{onClick:l,className:"\n        p-5 m-1\n        ".concat(u.a.flexColumn," \n        ").concat(u.a.cursorPointer," \n        ").concat(u.a.panelColor," \n        ").concat(Se.a.contentContainer," \n        ").concat(u.a.borderRadius24,"\n        "),children:[Object(x.jsxs)("div",{className:"".concat(u.a.flexRow," ").concat(u.a.flexJCBetween," ").concat(u.a.flexAICenter),children:[Object(x.jsxs)("span",{className:"text text_type_digits-default",children:["#",t.number]}),Object(x.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:Object(x.jsx)(ye.a,{locale:"ru",calendar:!0,children:t.createdAt})})]}),Object(x.jsx)("span",{className:"mt-3 text text_type_main-default",children:t.name}),Object(x.jsxs)("div",{className:"mt-3 ".concat(u.a.flexRow," ").concat(u.a.flexJCBetween," ").concat(u.a.flexAICenter),children:[Object(x.jsx)("div",{className:"".concat(u.a.flexRowReverse),children:s}),Object(x.jsxs)("div",{className:"".concat(u.a.flexRow," ").concat(u.a.flexAICenter),children:[Object(x.jsx)("span",{children:r}),Object(x.jsx)("div",{className:"ml-1",children:Object(x.jsx)(d.CurrencyIcon,{type:"primary"})})]})]})]})}),Te=n(70),Ie=n.n(Te),we=n(97),Ue=n.n(we),Fe=n(98),Ae=n.n(Fe),ke=function(e){var t=e.ingredient;return Object(x.jsxs)("li",{className:"mt-2 ".concat(u.a.wFull," ").concat(u.a.flexRow," ").concat(u.a.flexAICenter," ").concat(u.a.flexJCLeft),children:[Object(x.jsx)("img",{className:"".concat(Ae.a.ingredientLogo),src:t.image_mobile,alt:""}),Object(x.jsx)("span",{className:"text text_type_main-default ml-2 ".concat(u.a.flexFill),children:t.name}),Object(x.jsxs)("span",{className:"text text_type_digits-default",children:["1x",t.price]}),Object(x.jsx)("div",{className:"ml-2",children:Object(x.jsx)(d.CurrencyIcon,{type:"primary"})})]})},De=function(e){var t=e.storeKey,n=Object(S.i)().id,a=y((function(e){return e.feed[t]})),r=a.orders.findIndex((function(e){return e.number===parseInt(n,10)})),s=a.orders[r]||null,o="";switch(null===s||void 0===s?void 0:s.status){case"created":o="\u0421\u043e\u0437\u0434\u0430\u043d";break;case"pending":o="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f";break;case"done":o="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}var i=y((function(e){return e.ingredients})).rows,l=Object(c.useMemo)((function(){return i.filter((function(e){return(null===s||void 0===s?void 0:s.ingredients.indexOf(e._id))>=0}))}),[i,s]),d=Object(c.useMemo)((function(){return l.map((function(e,t){return Object(x.jsx)(ke,{ingredient:e},t)}))}),[l]);return Object(x.jsxs)("div",{className:"".concat(u.a.flexColumn," ").concat(u.a.flexJCCenter," ").concat(u.a.flexAICenter),children:[Object(x.jsxs)("span",{className:"text text_type_digits-default",children:["#",n]}),Object(x.jsx)("span",{className:"text text_type_main-default mt-5 ".concat(u.a.flexItemASStart),children:null===s||void 0===s?void 0:s.name}),Object(x.jsx)("span",{className:"text text_type_main-default text_color_success mt-1 ".concat(u.a.flexItemASStart),children:o}),Object(x.jsx)("span",{className:"text text_type_main-default mt-5 ".concat(u.a.flexItemASStart),children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(x.jsx)("ul",{className:"".concat(u.a.wFull," ").concat(Ue.a.list," scrollerY"),children:d})]})},Pe=function(e){return{type:"COMMON_FEED_UPDATE",feed:e}},Le=function(e){return{type:"PROFILE_FEED_UPDATE",feed:e}},Je="WS_CONNECTION_START",qe="WS_CONNECTION_CLOSE",Me=function(e){return{type:Je,payload:e}},Ge=function(e){return{type:qe,payload:e}},Be=function(e){return{type:"WS_CONNECTION_SUCCESS",payload:e}},We=function(e){return{type:"WS_CONNECTION_ERROR",payload:e}},Qe=function(e){return{type:"WS_CONNECTION_CLOSED",payload:e}},He=function(){var e=E(),t=P("orders");Object(c.useEffect)((function(){var n=oe("accessToken").replace("Bearer ","");return e(Me({token:n,url:t,actions:{wsGetMessage:Le,wsConnectionError:We,wsConnectionClosed:Qe,wsConnectionSuccess:Be}})),function(){e(Ge({url:t}))}}),[]);var n=y((function(e){var n;return null===(n=e.socket[t])||void 0===n?void 0:n.wsConnected}))||!1,r=a.a.useState(!n),s=Object(C.a)(r,2),o=s[0],i=s[1];Object(c.useEffect)((function(){i(!n)}),[n]);var l=Object(S.i)().id,d=y((function(e){return e.feed})).profileFeed,j=a.a.useMemo((function(){return d.orders.map((function(e){return Object(x.jsx)(Ee,{feedOrder:e},e._id)}))}),[d]);return o?Object(x.jsx)(re,{centered:!0}):l?Object(x.jsx)("div",{className:"\n                    ".concat(u.a.wFull,"\n                    ").concat(u.a.hFull,"\n                    ").concat(u.a.flexRow,"\n                    ").concat(u.a.flexJCCenter,"\n                    mt-10\n                "),children:Object(x.jsx)("div",{className:"".concat(Ie.a.ordersDetailsItem),children:Object(x.jsx)(De,{storeKey:"profileFeed"})})}):0===d.orders.length?Object(x.jsx)("div",{className:"".concat(u.a.flexRow," ").concat(u.a.flexJCCenter),children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u0443\u0441\u0442"}):Object(x.jsx)("ul",{className:"".concat(u.a.overflowAuto," ").concat(Ie.a.container," scrollerY"),children:j})};function Ye(){var e=E(),t=y((function(e){return e.user})).userLogoutSuccess,n=Object(S.h)().pathname.split("/");return t?(localStorage.removeItem("refreshToken"),se("accessToken",null,{expired:-1}),Object(x.jsx)(S.a,{to:"/login"})):Object(x.jsx)("section",{className:"".concat(u.a.flexRow," ").concat(u.a.flexJCCenter),children:Object(x.jsxs)("div",{className:"".concat(Ce.a.content," ").concat(u.a.flexRow),children:[4!==n.length&&Object(x.jsx)("div",{className:"mr-15 ".concat(Ce.a.menuContent),children:Object(x.jsxs)("ul",{className:Ce.a.profileMenu,children:[Object(x.jsx)("li",{className:"p-2 pl-0",children:Object(x.jsx)(b.c,{exact:!0,activeClassName:Ce.a.profileMenuItemActive,to:"/profile",children:Object(x.jsx)("span",{className:"text_type_main-medium text_color_inactive",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})})}),Object(x.jsx)("li",{className:"p-2 pl-0",children:Object(x.jsx)(b.c,{activeClassName:Ce.a.profileMenuItemActive,to:"/profile/orders",children:Object(x.jsx)("span",{className:"text_type_main-medium text_color_inactive",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})}),Object(x.jsx)("li",{onClick:function(){e((function(e){e({type:"LOGOUT_USER_REQUEST"}),fetch(D("auth/logout"),{method:"POST",body:JSON.stringify({token:localStorage.getItem("refreshToken")}),headers:{"Content-Type":"application/json;charset=utf-8"}}).then(F).then(k).then((function(){return e({type:"LOGOUT_USER_SUCCESS"})})).catch((function(){return e({type:"LOGOUT_USER_FAILURE"})}))}))},className:"p-2 pl-0 ".concat(u.a.cursorPointer),children:Object(x.jsx)("span",{className:"text_type_main-medium text_color_inactive",children:"\u0412\u044b\u0445\u043e\u0434"})})]})}),Object(x.jsx)("div",{className:"".concat(u.a.flexFill," pt-6"),children:Object(x.jsxs)(S.d,{children:[Object(x.jsx)(S.b,{exact:!0,path:"/profile",component:ge}),Object(x.jsx)(S.b,{exact:!0,path:"/profile/orders",component:He}),Object(x.jsx)(S.b,{exact:!0,path:"/profile/orders/:id",component:He})]})})]})})}var Ke=function(){return Object(x.jsx)("span",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})},ze=function(){var e=null,t=Object(S.i)().id,n=y((function(e){return e.ingredients})).rows,c=n.findIndex((function(e){return e._id===t}));c>=0&&(e=n[c]);var a=Object(x.jsx)(re,{});return e&&(a=Object(x.jsxs)("div",{className:"".concat(u.a.flexColumn," ").concat(u.a.flexJCCenter),children:[Object(x.jsx)("span",{className:"text_type_main-medium ".concat(u.a.textCenter),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(x.jsx)("img",{alt:"",src:e.image}),Object(x.jsx)("span",{className:"mt-4 text text_type_main-default ".concat(u.a.textCenter),children:e.name}),Object(x.jsxs)("div",{className:"mt-8 ".concat(u.a.flexRow," ").concat(u.a.flexJCBetween),children:[Object(x.jsxs)("div",{className:"text text_type_main-small text_color_inactive ".concat(u.a.flexColumn," ").concat(u.a.flexAICenter),children:[Object(x.jsx)("span",{children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(x.jsx)("span",{className:"mt-2",children:e.calories})]}),Object(x.jsxs)("div",{className:"ml-5 text text_type_main-small text_color_inactive ".concat(u.a.flexColumn," ").concat(u.a.flexAICenter),children:[Object(x.jsx)("span",{children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(x.jsx)("span",{className:"mt-2",children:e.proteins})]}),Object(x.jsxs)("div",{className:"ml-5 text text_type_main-small text_color_inactive ".concat(u.a.flexColumn," ").concat(u.a.flexAICenter),children:[Object(x.jsx)("span",{children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(x.jsx)("span",{className:"mt-2",children:e.fat})]}),Object(x.jsxs)("div",{className:"ml-5 text text_type_main-small text_color_inactive ".concat(u.a.flexColumn," ").concat(u.a.flexAICenter),children:[Object(x.jsx)("span",{children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(x.jsx)("span",{className:"mt-2",children:e.carbohydrates})]})]})]})),Object(x.jsx)("section",{className:"".concat(u.a.flexRow," ").concat(u.a.flexJCCenter," ").concat(u.a.page," pb-4"),children:a})},Xe=n(24),Ze=n.n(Xe),Ve=function(){var e=Object(S.i)().id,t=y((function(e){return e.feed})).commonFeed,n=a.a.useMemo((function(){return null===t||void 0===t?void 0:t.orders.map((function(e){return Object(x.jsx)(Ee,{feedOrder:e},e._id)}))}),[t]),r=E(),s=P("orders/all");Object(c.useEffect)((function(){return r(Me({url:s,actions:{wsGetMessage:Pe,wsConnectionError:We,wsConnectionClosed:Qe,wsConnectionSuccess:Be}})),function(){r(Ge({url:s}))}}),[]);var o=y((function(e){var t;return null===(t=e.socket[s])||void 0===t?void 0:t.wsConnected}))||!1,i=a.a.useState(!o),l=Object(C.a)(i,2),d=l[0],j=l[1];Object(c.useEffect)((function(){j(!o)}),[o]);var m=a.a.useMemo((function(){return((null===t||void 0===t?void 0:t.orders.filter((function(e){return"done"===e.status})))||[]).map((function(e){return Object(x.jsx)("span",{className:"text_type_digits-default text_color_success ".concat(Ze.a.rowHeight),children:e.number},e._id)}))}),[t]),b=a.a.useMemo((function(){return((null===t||void 0===t?void 0:t.orders.filter((function(e){return"pending"===e.status})))||[]).map((function(e){return Object(x.jsx)("span",{className:"text_type_digits-default ".concat(Ze.a.rowHeight),children:e.number},e._id)}))}),[t]);return d?Object(x.jsx)(re,{centered:!0}):e?Object(x.jsx)("div",{className:"\n                    ".concat(u.a.wFull,"\n                    ").concat(u.a.hFull,"\n                    ").concat(u.a.flexRow,"\n                    ").concat(u.a.flexJCCenter,"\n                    mt-10\n                "),children:Object(x.jsx)("div",{className:"".concat(Ze.a.ordersDetailsItem),children:Object(x.jsx)(De,{storeKey:"commonFeed"})})}):Object(x.jsx)("section",{className:"".concat(u.a.flexRow," ").concat(u.a.flexJCCenter," ").concat(u.a.page," pb-4"),children:Object(x.jsxs)("div",{className:"".concat(u.a.flexRow),children:[Object(x.jsxs)("div",{className:"".concat(u.a.flexColumn," mt-5"),children:[Object(x.jsx)("span",{className:"text text_type_main-large",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(x.jsx)("ul",{className:"scrollerY ".concat(u.a.flexColumn," ").concat(Ze.a.list," ").concat(u.a.overflowXHidden),children:n})]}),Object(x.jsxs)("div",{className:"".concat(u.a.flexColumn," mt-5"),children:[Object(x.jsx)("span",{className:"text text_type_main-large",children:"\xa0"}),Object(x.jsxs)("div",{className:"p-3 pl-5 ".concat(u.a.flexColumn),children:[Object(x.jsxs)("div",{className:"".concat(u.a.flexRow," ").concat(Ze.a.ordersDetailsContent," ").concat(Ze.a.ordersDetailsQueue),children:[Object(x.jsxs)("div",{className:"".concat(u.a.flexFill),children:[Object(x.jsx)("span",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(x.jsx)("div",{className:"".concat(u.a.flexColumn," ").concat(u.a.flexWrap," ").concat(u.a.hFull),children:m})]}),Object(x.jsxs)("div",{className:"".concat(u.a.flexFill),children:[Object(x.jsx)("span",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(x.jsx)("div",{className:"".concat(u.a.flexColumn," ").concat(u.a.flexWrap," ").concat(u.a.hFull),children:b})]})]}),Object(x.jsxs)("div",{className:"pt-15 ".concat(u.a.flexColumn),children:[Object(x.jsx)("span",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f:"}),Object(x.jsx)("span",{className:"text text_type_digits-large ".concat(Ze.a.textShadow),children:null===t||void 0===t?void 0:t.total})]}),Object(x.jsxs)("div",{className:"pt-15 ".concat(u.a.flexColumn),children:[Object(x.jsx)("span",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(x.jsx)("span",{className:"text text_type_digits-large ".concat(Ze.a.textShadow),children:null===t||void 0===t?void 0:t.totalToday})]})]})]})]})})};function $e(){var e=function(){var e=Object(S.h)(),t=Object(S.g)(),n=e.state&&e.state.background,c=function(e){t.replace(e)},r=E();return a.a.useEffect((function(){r((function(e){e({type:"INGREDIENTS_REQUEST"});var t=D("ingredients");fetch(t).then(F).then(k).then((function(t){return e({type:"INGREDIENTS_SUCCESS",rows:t.data})})).catch((function(){return e({type:"INGREDIENTS_FAILURE"})}))}))}),[r]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O,{}),Object(x.jsxs)(S.d,{location:n||e,children:[Object(x.jsx)(S.b,{exact:!0,path:"/",component:me}),Object(x.jsx)(S.b,{exact:!0,path:"/feed",component:Ve}),Object(x.jsx)(S.b,{path:"/feed/:id",component:Ve}),Object(x.jsx)(_e,{path:"/profile",component:Ye}),Object(x.jsx)(S.b,{path:"/ingredients/:id",component:ze}),Object(x.jsx)(S.b,{path:"/login",component:be}),Object(x.jsx)(S.b,{path:"/register",component:xe}),Object(x.jsx)(S.b,{path:"/forgot-password",component:fe}),Object(x.jsx)(S.b,{path:"/reset-password",component:Oe}),Object(x.jsx)(S.b,{children:Object(x.jsx)(Ke,{})})]}),n&&Object(x.jsx)(S.b,{path:"/ingredients/:id",children:Object(x.jsx)(ne,{header:"",onClose:c.bind(null,"/"),children:Object(x.jsx)(ze,{})})}),n&&Object(x.jsx)(S.b,{path:"/feed/:id",children:Object(x.jsx)(ne,{header:"",onClose:c.bind(null,"/feed"),children:Object(x.jsx)(De,{storeKey:"commonFeed"})})}),n&&Object(x.jsx)(S.b,{path:"/profile/orders/:id",children:Object(x.jsx)(ne,{header:"",onClose:c.bind(null,"/profile/orders"),children:Object(x.jsx)(De,{storeKey:"profileFeed"})})})]})};return Object(x.jsx)(b.a,{children:Object(x.jsx)(e,{})})}var et={ingredientsTab:"bun",ingredientsShowDetails:!1,rows:[],ingredientsRequest:!1,ingredientsFailure:!1},tt=n(16),nt=n(28),ct=n(206),at={cart:[],totalPrice:0},rt={user:null,userAuthRequest:!1,userAuthFailure:!1,userLoginRequest:!1,userLoginFailure:!1,userForgotPasswordRequest:!1,userForgotPasswordSuccess:!1,userForgotPasswordFailure:!1,userResetPasswordRequest:!1,userResetPasswordSuccess:!1,userResetPasswordFailure:!1,userLogoutRequest:!1,userLogoutSuccess:!1,userLogoutFailure:!1,userUpdateRequest:!1,userUpdateFailure:!1,userRegisterRequest:!1,userRegisterFailure:!1,order:null,userCreateOrderRequest:!1,userCreateOrderFailure:!1},st=n(22),ot={},it={commonFeed:{orders:[],total:0,totalToday:0},profileFeed:{orders:[],total:0,totalToday:0}},lt=Object(tt.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INGREDIENTS_REQUEST":return Object(h.a)(Object(h.a)({},e),{},{ingredientsRequest:!0,ingredientsFailure:!1});case"INGREDIENTS_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{rows:t.rows,ingredientsRequest:!1});case"INGREDIENTS_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{ingredientsFailure:!0,ingredientsRequest:!1});case"INGREDIENTS_SET_TAB":return Object(h.a)(Object(h.a)({},e),{},{ingredientsTab:t.tab});default:return e}},burgerConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONSTRUCTOR_ADD":var n=Object(nt.a)(e.cart);if("bun"===t.ingredient.type){var c=n.findIndex((function(e){return"bun"===e.type}));c>=0&&n.splice(c,1)}return n.push(Object(h.a)({},t.ingredient)),Object(h.a)(Object(h.a)({},e),{},{cart:n.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{uuid:Object(ct.a)()})})),totalPrice:n.reduce((function(e,t){return e+t.price}),0)});case"CONSTRUCTOR_DEL":var a=Object(nt.a)(e.cart),r=a.findIndex((function(e){return e.uuid===t.ingredient.uuid}));return a.splice(r,1),Object(h.a)(Object(h.a)({},e),{},{cart:Object(nt.a)(a),totalPrice:a.reduce((function(e,t){return e+t.price}),0)});case"CONSTRUCTOR_REPLACE":var s=t.data,o=s.dragIngredient,i=s.dropIngredient,l=Object(nt.a)(e.cart),u=e.cart.findIndex((function(e){return e.uuid===o.uuid}));l.splice(u,1);var d=e.cart.findIndex((function(e){return e.uuid===i.uuid}));return l.splice(d,0,o),Object(h.a)(Object(h.a)({},e),{},{cart:Object(nt.a)(l)});case"CONSTRUCTOR_RESET":return Object(h.a)(Object(h.a)({},e),{},{cart:[],totalPrice:0});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER_REQUEST":return Object(h.a)(Object(h.a)({},e),{},{user:null,userLoginRequest:!0,userLoginFailure:!1});case"LOGIN_USER_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{user:Object(h.a)({},t.user),userLoginRequest:!1,userLogoutSuccess:!1});case"LOGIN_USER_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{userLoginFailure:!0,userLoginRequest:!1});case"USER_CREATE_ORDER_REQUEST":return Object(h.a)(Object(h.a)({},e),{},{order:null,userCreateOrderRequest:!0,userCreateOrderFailure:!1});case"USER_CREATE_ORDER_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{order:t.order,userCreateOrderRequest:!1,userCreateOrderFailure:!1});case"USER_CREATE_ORDER_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{userCreateOrderFailure:!0,userCreateOrderRequest:!1});case"AUTH_USER_REQUEST":return Object(h.a)(Object(h.a)({},e),{},{userAuthRequest:!0,userAuthFailure:!1});case"AUTH_USER_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{user:t.user,userAuthRequest:!1});case"AUTH_USER_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{userAuthFailure:!0,userAuthRequest:!1});case"FORGOT_PASSWORD_REQUEST":return Object(h.a)(Object(h.a)({},e),{},{userForgotPasswordRequest:!0,userForgotPasswordSuccess:!1,userForgotPasswordFailure:!1});case"FORGOT_PASSWORD_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{userForgotPasswordSuccess:!0,userForgotPasswordRequest:!1});case"FORGOT_PASSWORD_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{userForgotPasswordFailure:!0,userForgotPasswordRequest:!1});case"RESET_PASSWORD_REQUEST":return Object(h.a)(Object(h.a)({},e),{},{userResetPasswordRequest:!0,userResetPasswordFailure:!1,userResetPasswordSuccess:!1});case"RESET_PASSWORD_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{userResetPasswordSuccess:!0,userResetPasswordRequest:!1});case"RESET_PASSWORD_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{userResetPasswordFailure:!0,userResetPasswordRequest:!1});case"LOGOUT_USER_REQUEST":return Object(h.a)(Object(h.a)({},e),{},{userLogoutRequest:!0,userLogoutSuccess:!1,userLogoutFailure:!1});case"LOGOUT_USER_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{userLogoutSuccess:!0,userLogoutRequest:!1});case"LOGOUT_USER_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{userLogoutFailure:!0,userLogoutRequest:!1});case"UPDATE_USER_REQUEST":return Object(h.a)(Object(h.a)({},e),{},{userUpdateRequest:!0,userUpdateFailure:!1});case"UPDATE_USER_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{user:t.user,userUpdateRequest:!1});case"UPDATE_USER_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{userUpdateFailure:!0,userUpdateRequest:!1});case"REGISTER_USER_REQUEST":return Object(h.a)(Object(h.a)({},e),{},{userRegisterRequest:!0,userRegisterFailure:!1});case"REGISTER_USER_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{user:t.user,userRegisterRequest:!1});case"REGISTER_USER_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{userRegisterFailure:!0,userRegisterRequest:!1});default:return e}},socket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WS_CONNECTION_SUCCESS":var n=t.payload.url;return Object(st.a)({},n,Object(h.a)(Object(h.a)({},e[n]),{},{wsConnected:!0}));case"WS_CONNECTION_ERROR":var c=t.payload,a=c.url,r=c.event;return Object(st.a)({},a,Object(h.a)(Object(h.a)({},e[a]),{},{wsConnected:!1,error:r}));case"WS_CONNECTION_CLOSED":var s=t.payload.url;return Object(st.a)({},s,Object(h.a)(Object(h.a)({},e[s]),{},{wsConnected:!1,error:void 0}));default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COMMON_FEED_UPDATE":return Object(h.a)(Object(h.a)({},e),{},{commonFeed:JSON.parse(t.feed)});case"PROFILE_FEED_UPDATE":return Object(h.a)(Object(h.a)({},e),{},{profileFeed:JSON.parse(t.feed)});default:return e}}}),ut=n(100),dt=n(99),jt=Object(dt.a)({reducer:lt,middleware:function(e){return e({serializableCheck:!1}).concat(ut.a,(function(e){var t={};return function(n){return function(c){var a=e.dispatch,r=c.type;if(r===Je){var s=c.payload,o=s.url,i=s.actions,l=s.token;o&&i&&(t[o]&&t[o].socket.readyState===WebSocket.OPEN&&t[o].socket.close(),t[o]={socket:new WebSocket(l?"".concat(o,"?token=").concat(l):o),connectData:s},t[o].socket.onopen=function(e){var t={url:o,event:e};a(i.wsConnectionSuccess(t))},t[o].socket.onerror=function(e){var n={url:o,event:e};a(i.wsConnectionError(n)),setTimeout((function(){a(Me(t[o].connectData))}),1e3)},t[o].socket.onmessage=function(e){var t=e.data;a(i.wsGetMessage(t))},t[o].socket.onclose=function(e){var t={url:o,event:e};a(i.wsConnectionClosed(t))})}else if(r===qe){var u=c.payload.url;u&&t[u].socket.close()}n(c)}}}))}});z.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(r.a,{store:jt,children:Object(x.jsx)($e,{})})}),document.getElementById("root")),s()},2:function(e,t,n){e.exports={flexRow:"common_flexRow__392yC",flexRowReverse:"common_flexRowReverse__LZAo4",flexColumn:"common_flexColumn__38Buv",flexWrap:"common_flexWrap__Mfxw4",flexAICenter:"common_flexAICenter__2Yhac",flexJCCenter:"common_flexJCCenter__335IT",flexJCRight:"common_flexJCRight__2lsDR",flexJCLeft:"common_flexJCLeft__1INHr",flexJCAround:"common_flexJCAround__1dy1T",flexJCBetween:"common_flexJCBetween__2my2a",flexFill:"common_flexFill__17C5p",flexItemASCenter:"common_flexItemASCenter__1CIaJ",flexItemASStart:"common_flexItemASStart__14m0K",panelColor:"common_panelColor__2Opbr",icon36:"common_icon36__166Fm",page:"common_page__aqRej",hFull:"common_hFull__UTCTs",wFull:"common_wFull__2uGFQ",button:"common_button__2M6of",cursorPointer:"common_cursorPointer__15oj-",textCenter:"common_textCenter__14YWI",textDecorationNone:"common_textDecorationNone__hhiTe",borderRadius24:"common_borderRadius24__3x25g",overflowAuto:"common_overflowAuto__2gHSl",overflowXHidden:"common_overflowXHidden__1dNVB"}},24:function(e,t,n){e.exports={list:"feed_list__QEA8z",ordersDetailsContent:"feed_ordersDetailsContent__j-ot5",ordersDetailsQueue:"feed_ordersDetailsQueue__34Jfa",ordersDetailsItem:"feed_ordersDetailsItem__lE0Jb",fontSmaller:"feed_fontSmaller__1DLtP",textShadow:"feed_textShadow__3omA2",rowHeight:"feed_rowHeight__3M3QZ"}},31:function(e,t,n){e.exports={item:"burger-constructor-item_item__1p-7m",smallImage:"burger-constructor-item_smallImage__1Zmt7",canDragUp:"burger-constructor-item_canDragUp__1F8fs",canDragDown:"burger-constructor-item_canDragDown__1UusS",dragPointer:"burger-constructor-item_dragPointer__3SAoV"}},32:function(e,t,n){e.exports={profileMenu:"profile_profileMenu__278sJ",profileMenuItemActive:"profile_profileMenuItemActive__3FYXR",content:"profile_content__1AefR",menuContent:"profile_menuContent__TTGKB"}},42:function(e,t,n){e.exports={item:"burger-ingredients-item_item__1kZOF",price:"burger-ingredients-item_price__1jUl6",name:"burger-ingredients-item_name__2EPvq"}},54:function(e,t,n){e.exports={iconButton:"icon-button_iconButton__3s-UF",active:"icon-button_active__1jbQL"}},55:function(e,t,n){e.exports={itemTop:"burger-constructor-bun-item_itemTop__2aTI0",itemBottom:"burger-constructor-bun-item_itemBottom__2kiSm",smallImage:"burger-constructor-bun-item_smallImage__3Q6Y-"}},66:function(e,t,n){e.exports={content:"burger-construtor_content__371Hs",list:"burger-construtor_list__1blPe"}},67:function(e,t,n){e.exports={spinner:"spinner_spinner__3RSk8",spin:"spinner_spin__GHJu3",centered:"spinner_centered__17ZOR"}},69:function(e,t,n){e.exports={contentContainer:"feed-order_contentContainer__3lMJs",ingredientLogo:"feed-order_ingredientLogo__3ePU1",list:"feed-order_list__3EAVs"}},70:function(e,t,n){e.exports={container:"orders_container__3pTuT"}},88:function(e,t,n){e.exports={logoCentering:"app-header_logoCentering__3sjES",flexHCenter:"app-header_flexHCenter__3tbCX"}},89:function(e,t,n){e.exports={content:"burger-ingredients_content__1Jfst"}},93:function(e,t,n){e.exports={modal:"modal_modal__2cNrF"}},94:function(e,t,n){e.exports={modalOverlay:"modal-overlay_modalOverlay__2oMJ3"}},97:function(e,t,n){e.exports={list:"feed-order-details_list__1rylg"}},98:function(e,t,n){e.exports={ingredientLogo:"ingredient-list-item_ingredientLogo__tvzql"}}},[[197,1,2]]]);
//# sourceMappingURL=main.8db5156d.chunk.js.map